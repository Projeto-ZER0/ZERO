<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Project ZERO | TIERLIST</title>

  <script href="../js/funcoes.js"></script>
  <link rel="icon" href="../assets/icon/Icon.png">
  <link rel="stylesheet" href="Tierlist_Quiz.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">

  <!-- <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet"> -->
</head>

<body style="display: block;">
  <div class="header">
    <div class="container">
      <img class="titulo" src="../assets/imgs/Logo.png">
      <ul class="navbar">
        <li class="agora">
          <a href="#">Quiz</a>
        </li>
      <li>
          <a href="RankingQuiz.html">Ranking Quiz</a>
      </li>
        <li>
          <a href="tierlist.html">Tier List</a>
        </li>
        <li>|</li>
        <li>
          <a href="../index.html">Sair</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="Quiz">
    <h1>Quiz Katana Zero</h1>

    <div id="quiz-container">
      <h3>Pergunta 1: Qual o nome do protagonista do jogo Katana Zero?</h3>
      <input type="radio" name="q1" value="a"> a) Zero<br>
      <input type="radio" name="q1" value="b"> b) Kazuma<br>
      <input type="radio" name="q1" value="c"> c) Ryu<br>

      <h3>Pergunta 2: Por que o Zero pode desacelerar o tempo?</h3>
      <input type="radio" name="q2" value="a"> a) Por causa de sua doença mental chamada "chronos", que o faz ter uma
      percepção de tempo diferente<br>
      <input type="radio" name="q2" value="b"> b) Por causa de uma droga de guerra chamada "chronos"<br>
      <input type="radio" name="q2" value="c"> c) Ele tem um dispositivo de tecnologia do governo chamado "chronos" que
      pode retardar o tempo.o<br>

      <h3>Pergunta 3: O que os homens mascarados representam?</h3>
      <input type="radio" name="q3" value="a"> a) Tragedia e Comedia<br>
      <input type="radio" name="q3" value="b"> b) Felicidade e Tristeza<br>
      <input type="radio" name="q3" value="c"> c) Amor e Desespero<br>

      <h3>Pergunta 4: Quem é o boss final?</h3>
      <input type="radio" name="q4" value="a"> a) Fifiteen<br>
      <input type="radio" name="q4" value="b"> b) V<br>
      <input type="radio" name="q4" value="c"> c) Headhunter<br>

      <h3>Pergunta 5: Quantas fitas o jogo possui?</h3>
      <input type="radio" name="q5" value="a"> a) 9<br>
      <input type="radio" name="q5" value="b"> b) 12<br>
      <input type="radio" name="q5" value="c"> c) 11<br>

      <h3>Pergunta 6: Qual o nome da Samurai que trabalha com o V?</h3>
      <input type="radio" name="q6" value="a"> a) Sakura<br>
      <input type="radio" name="q6" value="b"> b) Snow<br>
      <input type="radio" name="q6" value="c"> c) Recepcionista<br>

      <h3>Pergunta 7: Qual é o boss secreto do jogo? </h3>
      <input type="radio" name="q7" value="a"> a) Psiquiatra<br>
      <input type="radio" name="q7" value="b"> b) A Garotinha<br>
      <input type="radio" name="q7" value="c"> c) Snow<br>

      <h3>Pergunta 8: Em qual fase você controla o verdadeiro Dragão?</h3>
      <input type="radio" name="q8" value="a"> a) 11<br>
      <input type="radio" name="q8" value="b"> b) 6<br>
      <input type="radio" name="q8" value="c"> c) 8<br>

      <h3>Pergunta 9: Quem você engana para entrar no hotel?</h3>
      <input type="radio" name="q9" value="a"> a) Recepcionista<br>
      <input type="radio" name="q9" value="b"> b) Muralha<br>
      <input type="radio" name="q9" value="c"> c) Psiquiatra<br>

      <h3>Pergunta 10: Quantas espadas podem ser desbloqueadas ao longo do jogo?</h3>
      <input type="radio" name="q10" value="a"> a) 7<br>
      <input type="radio" name="q10" value="b"> b) 5<br>
      <input type="radio" name="q10" value="c"> c) 3<br>



      <button onclick="calcularResultado()">Verificar resultado</button>
    </div>

    <div id="resultado-container" style="display: none;">
      <h3>Resultado</h3>
      <p id="acertos"></p>
      <p id="porcentagem"></p>
    </div>

  </div>
</body>

<script>
  function calcularResultado() {
    const respostasCorretas = ['a', 'b', 'a', 'c', 'b', 'b', 'a', 'c', 'a', 'b'];
    const numPerguntas = 10;
    var numAcertos = 0;
    var numErros = 0;

    for (var i = 1; i <= numPerguntas; i++) {
      const respostaSelecionada = document.querySelector(`input[name=q${i}]:checked`);
      if (respostaSelecionada) {
        const resposta = respostaSelecionada.value;
        if (resposta === respostasCorretas[i - 1]) {
          numAcertos++;
        } else {
          numErros++;
        }
      }
    }

    const porcentagemAcertos = (numAcertos / numPerguntas) * 100;
    const porcentagemErros = (numErros / numPerguntas) * 100;

    document.getElementById('acertos').innerHTML = `Você acertou ${numAcertos} perguntas.`;
    document.getElementById('porcentagem').innerHTML = `Porcentagem de acertos: ${porcentagemAcertos}%`;

    document.getElementById('quiz-container').style.display = 'none';
    document.getElementById('resultado-container').style.display = 'block';
    document.getElementById('resultado-grafico').style.display = 'block';


    // Enviando o valor da nova input
    fetch("/quiz/calcularResultado", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        acertoServer: numAcertos,
        erroServer: numErros
      })
    }).then(function (resposta) {

      console.log("resposta: ", resposta);

      if (resposta.ok) {
        cardErro.style.display = "block";

        mensagem_erro.innerHTML = "Quiz realizado com sucesso! Redirecionando para tela de Resultado";

        setTimeout(() => {
          window.location = "login.html";
        }, "2000")

        limparFormulario();
        finalizarAguardar();
      } else {
        throw ("Houve um erro ao tentar calcular o Resultado!");
      }
    }).catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
      finalizarAguardar();
    });

    return false;
  }

  function sumirMensagem() {
        cardErro.style.display = "none"
    }

</script>